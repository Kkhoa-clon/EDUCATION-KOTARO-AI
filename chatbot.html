<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kotaro AI - Tr·ª£ L√Ω Sen</title>
    <meta name="description" content="Kotaro AI gi√∫p h·ªçc sinh kh√°m ph√° khoa h·ªçc th√¥ng qua c√°c c√¥ng c·ª• AI v√† t∆∞∆°ng t√°c tr·ª±c tuy·∫øn." />
    <link rel="icon" href="hinh-anh/logo-Photoroom.png" type="image/x-jpg">
    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,100..900&family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap">
    <!-- Material Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0&family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0" />
    <!-- CSS Files -->
    <link rel="stylesheet" href="assets/css/chatbot.css" />
    <link rel="stylesheet" href="assets/css/chatbot-sd.css" />
</head>
    <!-- L·ªõp ph·ªß Spinner -->
    <div class="spinner-overlay d-none" id="loadingSpinner">
        <div class="spinner-container">
            <img src="../hinh-anh/loading.gif" alt="ƒêang t·∫£i...">
        </div>
    </div>
    <link href="../assets/css/robot-sao-hoa.css" rel="stylesheet">
<body>
    <!-- Animated Background Elements -->
    <div class="banner-bg-elements">
        <div class="bg-orb orb-1"></div>
        <div class="bg-orb orb-2"></div>
        <div class="bg-orb orb-3"></div>
        <div class="particle-field">
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
        </div>
    </div>

    <!-- Main Chatbot Container -->
    <div class="chatbot-popup">
        <!-- Sidebar - Left Panel -->
        <div class="chat-sidebar">
            <!-- Sidebar Header -->
            <div class="sidebar-header">
                <div class="sidebar-title">
                    <span class="material-symbols-rounded">smart_toy</span>
                    KOTARO AI
                </div>
                <div class="sidebar-subtitle">Tr·ª£ l√Ω h·ªçc t·∫≠p th√¥ng minh</div>
            </div>
            <br>
            <!-- Ch·ªß ƒë·ªÅ minh h·ªça Chatbot c√≥ th·ªÉ h·ªó tr·ª£ -->
            <div class="chat-history chatbot-demo-topics">
                <div class="chat-history-item">
                    <div class="chat-history-title">Gi·∫£i ph∆∞∆°ng tr√¨nh H√≥a H·ªçc</div>
                    <div class="chat-history-preview">V√≠ d·ª•: H2 + O2 = H2O</div>
                </div>
                <div class="chat-history-item">
                    <div class="chat-history-title">L√Ω gi·∫£i hi·ªán t∆∞·ª£ng V·∫≠t L√Ω</div>
                    <div class="chat-history-preview">V√≠ d·ª•: L·ª±c h·∫•p d·∫´n, ƒë·ªãnh lu·∫≠t Ohm, ...</div>
                </div>
                <div class="chat-history-item">
                    <div class="chat-history-title">Nghi√™n c·ª©u Sinh H·ªçc</div>
                    <div class="chat-history-preview">V√≠ d·ª•: C√°c b√†i t·∫≠p sinh h·ªçc, gi·∫£i th√≠ch c√°c hi·ªán t∆∞·ª£ng sinh h·ªçc...</div>
                </div>
                <div class="chat-history-item">
                    <div class="chat-history-title">Ki·∫øn th·ª©c To√°n h·ªçc</div>
                    <div class="chat-history-preview">V√≠ d·ª•: ƒê·ªãnh l√Ω Pythagoras, gi·∫£i ph∆∞∆°ng tr√¨nh...</div>
                </div>
                <div class="chat-history-item">
                    <div class="chat-history-title">T∆∞ v·∫•n h·ªçc t·∫≠p</div>
                    <div class="chat-history-preview">L·∫≠p k·∫ø ho·∫°ch √¥n thi, m·∫πo h·ªçc hi·ªáu qu·∫£...</div>
                </div>
                <div class="chat-history-item">
                    <div class="chat-history-title">T·∫°o s∆° ƒë·ªì t∆∞ duy</div>
                    <div class="chat-history-preview">T√≥m t·∫Øt b√†i h·ªçc b·∫±ng s∆° ƒë·ªì, mindmap...</div>
                </div>
                <div class="chat-history-item">
                    <div class="chat-history-title">Ph√¢n t√≠ch h√¨nh ·∫£nh</div>
                    <div class="chat-history-preview">Nh·∫≠n di·ªán n·ªôi dung, m√¥ t·∫£ ·∫£nh, tr√≠ch xu·∫•t th√¥ng tin...</div>
                </div>
                <div class="chat-history-item">
                    <div class="chat-history-title">Gi·∫£i th√≠ch code l·∫≠p tr√¨nh</div>
                    <div class="chat-history-preview">Ph√¢n t√≠ch, s·ª≠a l·ªói, t·ªëi ∆∞u code Python, C++, ...</div>
                </div>
            </div>

            <!-- Sidebar Footer -->
            <div class="sidebar-footer">
                <div class="sidebar-actions">
                    <button class="sidebar-action-btn" onclick="clearHistory()">
                        <span class="material-symbols-rounded">delete_sweep</span>
                        X√≥a l·ªãch s·ª≠
                    </button>
                    <button class="sidebar-action-btn" onclick="exportChat()">
                        <span class="material-symbols-rounded">download</span>
                        Xu·∫•t cu·ªôc tr√≤ chuy·ªán
                    </button>
                    <button class="sidebar-action-btn" onclick="showSettings()">
                        <span class="material-symbols-rounded">settings</span>
                        C√†i ƒë·∫∑t
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Chat Area -->
        <div class="chat-main">
            <!-- Chatbot Header -->
            <div class="chat-header">
                <a href="index.html" class="back-button material-symbols-rounded">arrow_back</a>
                <div class="header-info">
                    <img class="chatbot-logo" src="https://i.pinimg.com/736x/1b/9d/20/1b9d203c25c64fac1117c96309808415.jpg" alt="Chatbot Logo">
                    <h2 class="logo-text">Tr·ª£ L√Ω Sen</h2>
                </div>
                <button id="extra-header-btn" class="material-symbols-rounded">apps</button>
            </div>

            <!-- Chatbot Body -->
            <div class="chat-body">
                <div class="message bot-message">
                    <img class="bot-avatar" src="https://i.pinimg.com/736x/1b/9d/20/1b9d203c25c64fac1117c96309808415.jpg" alt="Bot Avatar">
                    <div class="message-text">
                        <div class="welcome-message">
                            <h3>Xin ch√†o! üëã</h3>
                            <p style="margin-bottom: 16px; font-size: 1.1rem;">M√¨nh l√† <strong>B√© Sen</strong> ƒë·∫øn t·ª´ ƒê·ªìng Th√°p</p>
                            
                            <div class="feature-list">
                                <p style="margin: 0; line-height: 1.6;">
                                    M√¨nh c√≥ th·ªÉ tr·∫£ l·ªùi t·∫•t c·∫£ c√°c th·∫Øc m·∫Øc c·ªßa b·∫°n v·ªÅ 
                                    <strong style="color: #73d239;">Khoa H·ªçc T·ª± Nhi√™n</strong> v√† gi·∫£i th√≠ch m√¥ t·∫£ c√°c b√†i t·∫≠p kh√≥ trong qu√° tr√¨nh h·ªçc t·∫≠p, gi√°o d·ª•c v√† nghi√™n c·ª©u c·ªßa b·∫°n!
                                </p>
                            </div>
                            
                            <div class="command-section" style="margin-top: 20px;">
                                <p style="color: #73d239; font-weight: 600; margin-bottom: 8px;">
                                    <span class="material-symbols-rounded" style="vertical-align: middle; margin-right: 5px;">account_tree</span>
                                    N·∫øu mu·ªën t·∫°o s∆° ƒë·ªì kh·ªëi cho v·∫•n ƒë·ªÅ c·ªßa b·∫°n h√£y d√πng:
                                </p>
                                <div class="command-example">
                                    <code>/taosodo</code>
                                </div>
                                <p style="color: #73d239; font-weight: 600; margin: 16px 0 8px 0;">V√≠ d·ª•:</p>
                                <div class="command-example">
                                    <code>/taosodo T√¨m hi·ªÉu v·ªÅ c√°c b√†i t·∫≠p h√≥a h·ªØu c∆° l·ªõp 10</code>
                                </div>
                            </div>

                            <div style="margin-top: 20px; padding: 15px; background: rgba(115, 210, 57, 0.1); border-radius: 12px; border: 1px solid rgba(115, 210, 57, 0.3);">
                                <p style="margin: 0; font-size: 0.9rem; color: rgba(255, 255, 255, 0.8);">
                                    <span class="material-symbols-rounded" style="vertical-align: middle; margin-right: 5px; font-size: 1rem;">lightbulb</span>
                                    <strong>Tip:</strong> B·∫°n c√≥ th·ªÉ g·ª≠i h√¨nh ·∫£nh ho·∫∑c file ƒë·ªÉ m√¨nh ph√¢n t√≠ch v√† gi·∫£i th√≠ch chi ti·∫øt h∆°n!
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chatbot Footer -->
            <div class="chat-footer">
                <form action="#" class="chat-form">
                    <textarea placeholder="Nh·∫≠p tin nh·∫Øn c·ªßa b·∫°n..." class="message-input" required></textarea>
                    <div class="chat-controls">
                        <div class="file-upload-wrapper">
                            <input type="file" id="file-input" hidden accept="image/*,.pdf,.doc,.docx,.txt" />
                            <img src="#" alt="Uploaded file" />
                            <button type="button" id="file-upload" class="material-symbols-rounded" title="G·ª≠i file">attach_file</button>
                            <button type="button" id="file-cancel" class="material-symbols-rounded" title="H·ªßy file">close</button>
                        </div>
                        <button type="button" id="create-diagram-btn" class="material-symbols-rounded" title="T·∫°o s∆° ƒë·ªì">account_tree</button>
                        <button type="submit" id="send-message" class="material-symbols-rounded" title="G·ª≠i tin nh·∫Øn">arrow_upward</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Diagram Creation Modal -->
    <div id="diagram-modal" class="diagram-modal">
        <div class="diagram-modal-content">
            <div class="diagram-modal-header">
                <h3>
                    <span class="material-symbols-rounded">account_tree</span>
                    T·∫°o S∆° ƒê·ªì Kh·ªëi
                </h3>
                <button id="close-diagram-modal" class="material-symbols-rounded">close</button>
            </div>
            <div class="diagram-modal-body">
                <div class="diagram-input-section">
                    <label for="diagram-description">M√¥ t·∫£ s∆° ƒë·ªì:</label>
                    <textarea id="diagram-description" placeholder="Nh·∫≠p m√¥ t·∫£ thu·∫≠t to√°n ho·∫∑c quy tr√¨nh b·∫°n mu·ªën t·∫°o s∆° ƒë·ªì..."></textarea>
                    <button id="generate-diagram-btn" class="generate-diagram-btn">
                        <span class="material-symbols-rounded">account_tree</span>
                        T·∫°o S∆° ƒê·ªì
                    </button>
                </div>
                <div id="diagram-result" class="diagram-result" style="display: none;">
                    <!-- K·∫øt qu·∫£ s∆° ƒë·ªì s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y -->
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.17.2/dist/sweetalert2.all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@4.3.0/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <script src="assets/js/chatbot.js"></script>
    <script src="assets/js/chatbot-sd.js"></script>
    <script src="assets/js/chatbot-ui.js"></script>
    <script>
        // // Sidebar functionality
        // function startNewChat() {
        //     // Clear current chat
        //     const chatBody = document.querySelector('.chat-body');
        //     chatBody.innerHTML = `
        //         <div class="message bot-message">
        //             <img class="bot-avatar" src="https://i.pinimg.com/736x/1b/9d/20/1b9d203c25c64fac1117c96309808415.jpg" alt="Bot Avatar">
        //             <div class="message-text">
        //                 <div class="welcome-message">
        //                     <h3>Cu·ªôc tr√≤ chuy·ªán m·ªõi! üöÄ</h3>
        //                     <p style="margin-bottom: 16px; font-size: 1.1rem;">B·∫°n mu·ªën h·ªèi g√¨ h√¥m nay?</p>
        //                     <div class="feature-list">
        //                         <p style="margin: 0; line-height: 1.6;">
        //                             M√¨nh s·∫µn s√†ng gi√∫p b·∫°n v·ªõi c√°c c√¢u h·ªèi v·ªÅ <strong style="color: #73d239;">Khoa H·ªçc T·ª± Nhi√™n</strong>!
        //                         </p>
        //                     </div>
        //                 </div>
        //             </div>
        //         </div>
        //     `;
            
        //     // Update active chat in sidebar
        //     updateActiveChat('Cu·ªôc tr√≤ chuy·ªán m·ªõi');
        // }

        function updateActiveChat(title) {
            // Remove active class from all items
            document.querySelectorAll('.chat-history-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Add active class to first item and update title
            const firstItem = document.querySelector('.chat-history-item');
            if (firstItem) {
                firstItem.classList.add('active');
                firstItem.querySelector('.chat-history-title').textContent = title;
            }
        }

        function clearHistory() {
            Swal.fire({
                title: 'X√°c nh·∫≠n x√≥a',
                text: 'B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ tr√≤ chuy·ªán?',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#73d239',
                cancelButtonColor: '#d33',
                confirmButtonText: 'X√≥a',
                cancelButtonText: 'H·ªßy'
            }).then((result) => {
                if (result.isConfirmed) {
                    document.querySelector('.chat-history').innerHTML = '';
                    Swal.fire('ƒê√£ x√≥a!', 'L·ªãch s·ª≠ tr√≤ chuy·ªán ƒë√£ ƒë∆∞·ª£c x√≥a.', 'success');
                }
            });
        }

        function exportChat() {
            const messages = document.querySelectorAll('.message');
            let exportText = '=== L·ªäCH S·ª¨ TR√í CHUY·ªÜN KOTARO AI ===\n\n';
            
            messages.forEach((message, index) => {
                const isBot = message.classList.contains('bot-message');
                const sender = isBot ? 'Tr·ª£ L√Ω Sen' : 'B·∫°n';
                const text = message.querySelector('.message-text').textContent.trim();
                exportText += `${index + 1}. ${sender}:\n${text}\n\n`;
            });
            
            const blob = new Blob([exportText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'chat-history.txt';
            a.click();
            URL.revokeObjectURL(url);
            
            Swal.fire('Th√†nh c√¥ng!', 'Cu·ªôc tr√≤ chuy·ªán ƒë√£ ƒë∆∞·ª£c xu·∫•t.', 'success');
        }

        function showSettings() {
            Swal.fire({
                title: 'C√†i ƒë·∫∑t',
                html: `
                    <div style="text-align: left; margin: 20px 0;">
                        <h4>Giao di·ªán</h4>
                        <p>‚Ä¢ Ch·∫ø ƒë·ªô t·ªëi (m·∫∑c ƒë·ªãnh)</p>
                        <p>‚Ä¢ Font ch·ªØ: Inter + JetBrains Mono</p>
                        <p>‚Ä¢ K√≠ch th∆∞·ªõc: Responsive</p>
                        
                        <h4>T√≠nh nƒÉng</h4>
                        <p>‚Ä¢ File upload</p>
                        <p>‚Ä¢ S∆° ƒë·ªì kh·ªëi</p>
                        <p>‚Ä¢ Markdown support</p>
                        <p>‚Ä¢ ƒê·ªãnh d·∫°ng b·∫£ng</p>
                    </div>
                `,
                icon: 'info',
                confirmButtonColor: '#73d239',
                confirmButtonText: 'ƒê√≥ng'
            });
        }

        // Initialize chatbot popup
        document.addEventListener('DOMContentLoaded', function() {
            const chatbotPopup = document.querySelector('.chatbot-popup');
            chatbotPopup.classList.add('show');
        });
    </script>
</body>
</html>